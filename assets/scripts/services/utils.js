;(function(undefined) {
  'use strict';
  define(['./module'], function (services) {
    services.service("UtilsService", ['$window', function($window) {
      //Request Animation Frame Hook
      //http://paulirish.com/2011/requestanimationframe-for-smart-animating/
      var prefixes = 'webkit moz ms o'.split(' ');
      // get unprefixed rAF and cAF, if present
      var requestAnimationFrame = $window.requestAnimationFrame;
      var cancelAnimationFrame = $window.cancelAnimationFrame;
      // loop through vendor prefixes and get prefixed rAF and cAF
      var prefix;

      for (var i = 0; i < prefixes.length; i++) {
        if (requestAnimationFrame && cancelAnimationFrame) {
          break;
        }
        prefix = prefixes[i];
        requestAnimationFrame = requestAnimationFrame || $window[prefix + 'RequestAnimationFrame'];
        cancelAnimationFrame = cancelAnimationFrame || $window[prefix + 'CancelAnimationFrame'] || $window[prefix + 'CancelRequestAnimationFrame'];
      }

      if (!requestAnimationFrame || !cancelAnimationFrame) {
        requestAnimationFrame = function(callback) {
          $window.setTimeout(callback, 1000 / 60);
        };
        cancelAnimationFrame = function(id) {
          $window.clearTimeout(id);
        };
      }
      // put in global namespace
      $window.requestAnimationFrame = requestAnimationFrame;
      $window.cancelAnimationFrame = cancelAnimationFrame;
      return {};
    }]);
  });
}());